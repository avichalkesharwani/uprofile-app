{"ast":null,"code":"import _regeneratorRuntime from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,createContext,useContext}from'react';import createAuth0Client from'@auth0/auth0-spa-js';// create the context\nexport var Auth0Context=createContext();export var useAuth0=function useAuth0(){return useContext(Auth0Context);};// create a provider\nexport var Auth0Provider=/*#__PURE__*/function(_Component){_inherits(Auth0Provider,_Component);var _super=_createSuper(Auth0Provider);function Auth0Provider(){var _this;_classCallCheck(this,Auth0Provider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={auth0Client:null,isLoading:true,isAuthenticated:false,user:null};_this.config={domain:'avi-bootcamp.au.auth0.com',client_id:'LgWFna2L2GKf6UTuRwde29DV7MJpPsQL',redirect_uri:window.location.origin};_this.initializeAuth0=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var auth0Client,isAuthenticated,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createAuth0Client(_this.config);case 2:auth0Client=_context.sent;_this.setState({auth0Client:auth0Client});// check to see if they have been redirected after login\nif(!window.location.search.includes('code=')){_context.next=6;break;}return _context.abrupt(\"return\",_this.handleRedirectCallback());case 6:_context.next=8;return auth0Client.isAuthenticated();case 8:isAuthenticated=_context.sent;if(!isAuthenticated){_context.next=15;break;}_context.next=12;return auth0Client.getUser();case 12:_context.t0=_context.sent;_context.next=16;break;case 15:_context.t0=null;case 16:user=_context.t0;_this.setState({isLoading:false,isAuthenticated:isAuthenticated,user:user});case 18:case\"end\":return _context.stop();}}},_callee);}));_this.handleRedirectCallback=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({isLoading:true});_context2.next=3;return _this.state.auth0Client.handleRedirectCallback();case 3:_context2.next=5;return _this.state.auth0Client.getUser();case 5:user=_context2.sent;_this.setState({user:user,isAuthenticated:true,isLoading:false});window.history.replaceState({},document.title,window.location.pathname);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(Auth0Provider,[{key:\"componentDidMount\",value:function componentDidMount(){this.initializeAuth0();}// initialize the auth0 library\n},{key:\"render\",value:function render(){var _this$state=this.state,auth0Client=_this$state.auth0Client,isLoading=_this$state.isLoading,isAuthenticated=_this$state.isAuthenticated,user=_this$state.user;var children=this.props.children;var configObject={isLoading:isLoading,isAuthenticated:isAuthenticated,user:user,loginWithRedirect:function loginWithRedirect(){return auth0Client.loginWithRedirect.apply(auth0Client,arguments);},getTokenSilently:function getTokenSilently(){return auth0Client.getTokenSilently.apply(auth0Client,arguments);},getIdTokenClaims:function getIdTokenClaims(){return auth0Client.getIdTokenClaims.apply(auth0Client,arguments);},logout:function logout(){return auth0Client.logout.apply(auth0Client,arguments);}};return/*#__PURE__*/React.createElement(Auth0Context.Provider,{value:configObject},children);}}]);return Auth0Provider;}(Component);","map":{"version":3,"sources":["/Users/avikesha1/workspace-dev/react-auth0-spa-sdk-ga/src/contexts/auth0-context.js"],"names":["React","Component","createContext","useContext","createAuth0Client","Auth0Context","useAuth0","Auth0Provider","state","auth0Client","isLoading","isAuthenticated","user","config","domain","client_id","redirect_uri","window","location","origin","initializeAuth0","setState","search","includes","handleRedirectCallback","getUser","history","replaceState","document","title","pathname","children","props","configObject","loginWithRedirect","getTokenSilently","getIdTokenClaims","logout"],"mappings":"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","sourcesContent":["import React, { Component, createContext, useContext } from 'react';\nimport createAuth0Client from '@auth0/auth0-spa-js';\n\n// create the context\nexport const Auth0Context = createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\n\n// create a provider\nexport class Auth0Provider extends Component {\n\tstate = {\n\t\tauth0Client: null,\n\t\tisLoading: true,\n\t\tisAuthenticated: false,\n\t\tuser: null\n\t};\n\tconfig = {\n\t\tdomain: 'avi-bootcamp.au.auth0.com',\n\t\tclient_id: 'LgWFna2L2GKf6UTuRwde29DV7MJpPsQL',\n\t\tredirect_uri: window.location.origin\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.initializeAuth0();\n\t}\n\n\t// initialize the auth0 library\n\tinitializeAuth0 = async () => {\n\t\tconst auth0Client = await createAuth0Client(this.config);\n\t\tthis.setState({ auth0Client });\n\n\t\t// check to see if they have been redirected after login\n\t\tif (window.location.search.includes('code=')) {\n\t\t\treturn this.handleRedirectCallback();\n\t\t}\n\n\t\tconst isAuthenticated = await auth0Client.isAuthenticated();\n\t\tconst user = isAuthenticated ? await auth0Client.getUser() : null;\n\t\tthis.setState({ isLoading: false, isAuthenticated, user });\n\t};\n\n\thandleRedirectCallback = async () => {\n\t\tthis.setState({ isLoading: true });\n\n\t\tawait this.state.auth0Client.handleRedirectCallback();\n\t\tconst user = await this.state.auth0Client.getUser();\n\n\t\tthis.setState({ user, isAuthenticated: true, isLoading: false });\n\t\twindow.history.replaceState({}, document.title, window.location.pathname);\n\t};\n\n\trender() {\n\t\tconst { auth0Client, isLoading, isAuthenticated, user } = this.state;\n\t\tconst { children } = this.props;\n\n\t\tconst configObject = {\n\t\t\tisLoading,\n\t\t\tisAuthenticated,\n\t\t\tuser,\n\t\t\tloginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n\t\t\tgetTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n\t\t\tgetIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n\t\t\tlogout: (...p) => auth0Client.logout(...p)\n\t\t};\n\n\t\treturn <Auth0Context.Provider value={configObject}>{children}</Auth0Context.Provider>;\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}